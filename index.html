<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Donna's Recipe Collection</title>
    <style>
        :root {
            --primary: #7c3aed;
            --secondary: #e6d5ff;
            --bg: #fcf7ff;
            --text: #2c1810;
            --muted: #6b7280;
        }

        body {
            margin: 0;
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }

        .marquee {
            background: linear-gradient(135deg, var(--primary), #9f7aea);
            color: white;
            white-space: nowrap;
            overflow: hidden;
            padding: 0.8rem;
        }

        .marquee-content {
            display: inline-block;
            animation: marquee 30s linear infinite;
            font-size: 1.1rem;
        }

        @keyframes marquee {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        header {
            background: linear-gradient(135deg, var(--primary), #9f7aea);
            color: white;
            padding: 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .back-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            padding: 0.5rem 1rem;
            color: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 1rem;
        }

        .search-bar {
            width: 100%;
            max-width: 500px;
            margin: 1rem auto;
            position: relative;
        }

        .search-bar input {
            width: 100%;
            padding: 0.8rem 1rem 0.8rem 2.5rem;
            border: 1px solid var(--secondary);
            border-radius: 12px;
            font-size: 1rem;
        }

        .search-bar::before {
            content: "🔍";
            position: absolute;
            left: 0.8rem;
            top: 50%;
            transform: translateY(-50%);
        }

        .category-section {
            margin: 2rem 0;
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .category-title {
            color: var(--primary);
            font-size: 1.3rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--secondary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .recipe-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .recipe-item {
            padding: 0.8rem;
            border-radius: 8px;
            margin-bottom: 0.5rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.2s;
        }

        .recipe-item:hover {
            background: var(--secondary);
        }

        .recipe-details {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            margin-top: 1rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .recipe-details h2 {
            color: var(--primary);
            margin-top: 0;
        }

        .ingredients-list, .instructions-list {
            padding-left: 1.2rem;
        }

        .bee {
            position: fixed;
            font-size: 1.5rem;
            opacity: 0.2;
            animation: float 3s ease-in-out infinite;
            pointer-events: none;
            z-index: 1;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .serving-info {
            background: var(--secondary);
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="marquee">
        <div class="marquee-content">
            🐝 Donna's Retirement Recipe Collection 🐝 A Lifetime of Delicious Recipes 🍯
        </div>
    </div>

    <header>
        <button id="backBtn" class="back-btn">← Back</button>
        <h1>Donna's Recipe Collection</h1>
        <div style="width:80px"></div>
    </header>

    <div class="container">
        <div class="search-bar">
            <input type="search" id="searchRecipes" placeholder="Search recipes...">
        </div>

        <div id="categoryView"></div>
        <div id="recipeDetails" style="display:none"></div>
    </div>

    <div class="bee" style="top: 20%; left: 10%">🐝</div>
    <div class="bee" style="top: 40%; right: 15%">🐝</div>
    <div class="bee" style="bottom: 30%; left: 20%">🐝</div>

    <script>
        const categoryEmojis = {
            'Cakes': '🎂',
            'Cookies': '🍪',
            'Buns': '🥐',
            'Christmas': '🎄',
            'Puddings': '🍮',
            'Jams': '🍯',
            'Pickles': '🥒',
            'Savory': '🍲'
        };

        const recipes = [
            {
                id: 'cake1',
                name: 'Chocolate Brownies',
                category: 'Cakes',
                servingInfo: 'Makes: 15\nPrep Time: 30 mins\nCook Time: 25-30 mins\nCost: 30p per serve',
                ingredients: '225g Chocolate\n140g Butter\n3 Large eggs\n225g Caster Sugar\n100g Plain Flour\n1tsp Baking Powder\n1tsp Cocoa Powder',
                instructions: '1. Preheat the oven to gas 4, 180°C, fan 160°C. Line a rectangular tin (27 x 17.5 x 3.5cm) with baking parchment\n2. Chop 175g chocolate and place in a small, heavy-based pan with butter. Melt over low heat, stirring occasionally\n3. Remove from heat and leave to cool\n4. Chop 50g chocolate into small chunks and set aside\n5. Whisk eggs and sugar with hand mixer in large bowl until thick, fluffy and doubled in volume\n6. Gently fold in cooled chocolate mixture\n7. Sift flour, baking powder and cocoa and fold in\n8. Carefully stir in chopped chocolate without over-mixing\n9. Pour into lined tin and spread to corners\n10. Bake 25-30 mins until middle is set and top slightly crusty\n11. Remove and leave until entirely cold before lifting from tin\n12. For icing: Finely chop chocolate, heat with cream and sugar until melted\n13. Pour in 1-1½ tablespoons boiling water to thin\n14. Drizzle over brownies\n15. When set, cut into 15 squares\n\nServe with Madagascan Vanilla Ice Cream'
            },
            {
                id: 'cake2',
                name: 'Banana Bread',
                category: 'Cakes',
                ingredients: '200g self raising flour\n16g cornflour\n1 tsp baking soda\n3/4 tsp baking powder\n3/4 tsp cinnamon\n3 bananas\n56g spread\n52g oil\n1 tsp vanilla\n1 egg',
                instructions: '1. Melt the spread and mix all the wet ingredients together\n2. Mix all dry ingredients together\n3. Add the ingredients together until combined\n4. Grease or line a loaf tin\n5. Pour mixture into loaf tin and bake at 160°C for approximately 45 minutes'
            },
            {
                id: 'savory1',
                name: 'Katsu Curry Sauce',
                category: 'Savory',
                ingredients: '2-3 tbsp vegetable oil\n1 onion, finely chopped\n1 garlic clove, crushed\n2.5cm piece of ginger, peeled + grated\n1 tsp turmeric\n2 heaped tbsp mild curry powder\n1 tbsp plain flour\n300ml chicken or veg stock\n100ml coconut milk\n1 tsp light soy sauce\n1 tsp sugar, to taste',
                instructions: '1. Heat oil in pan\n2. Add chopped onion and cook until softened\n3. Add crushed garlic and grated ginger\n4. Add turmeric and curry powder\n5. Add flour and cook for 1 minute\n6. Gradually add stock while stirring\n7. Add coconut milk\n8. Add soy sauce and sugar\n9. Simmer until thickened'
            },
            {
                id: 'savory2',
                name: 'Pizza Dough',
                category: 'Savory',
                ingredients: '400g plain flour, plus extra to dust\n1 x 7g sachet fast action dried yeast\n1 tsp fine sea salt\n1 tsp caster sugar\n2 tbsp olive oil, plus extra to drizzle\n1 tbsp cornmeal, polenta or semolina, to roll out',
                instructions: '1. Preheat oven to hottest setting (240°C, fan 220°C, gas 9)\n2. Put pizza stones or baking trays in to heat\n3. Mix flour, yeast, salt and sugar in bowl\n4. Make well in centre, add oil and 225ml water\n5. Form dough and knead for 1 minute until smooth\n6. Rest under bowl while preparing toppings\n7. Roll to 25cm diameter on floured surface\n8. Place on cornmeal-dusted baking paper\n9. Stretch to 30cm, create thicker crust at edges\n10. Add toppings and drizzle with oil\n11. Rest 10-15 minutes\n12. Bake 10-15 minutes until golden'
            }
        ];

        let lastViewedId = localStorage.getItem('lastViewedRecipe');

        function showRecipeDetails(recipe) {
            const categoryView = document.getElementById('categoryView');
            const detailsView = document.getElementById('recipeDetails');
            const backBtn = document.getElementById('backBtn');
            
            detailsView.innerHTML = `
                <div class="recipe-details">
                    <h2>${categoryEmojis[recipe.category]} ${recipe.name}</h2>
                    ${recipe.servingInfo ? `
                        <div class="serving-info">
                            ${recipe.servingInfo.split('\n').join('<br>')}
                        </div>
                    ` : ''}
                    <h3>Ingredients:</h3>
                    <ul class="ingredients-list">
                        ${recipe.ingredients.split('\n').map(i => `<li>${i}</li>`).join('')}
                    </ul>
                    <h3>Instructions:</h3>
                    <ol class="instructions-list">
                        ${recipe.instructions.split('\n').map(i => `<li>${i.replace(/^\d+\.\s*/, '')}</li>`).join('')}
                    </ol>
                </div>
            `;
            
            categoryView.style.display = 'none';
            detailsView.style.display = 'block';
            backBtn.style.visibility = 'visible';
            
            localStorage.setItem('lastViewedRecipe', recipe.id);
        }

        function showCategoryView(searchTerm = '') {
            const categoryView = document.getElementById('categoryView');
            const detailsView = document.getElementById('recipeDetails');
            const backBtn = document.getElementById('backBtn');
            
            const categories = {};
            Object.keys(categoryEmojis).forEach(cat => categories[cat] = []);
            
            recipes.forEach(recipe => {
                if (!recipe.name.toLowerCase().includes(searchTerm.toLowerCase())) return;
                categories[recipe.category].push(recipe);
            });

            Object.keys(categories).forEach(cat => {
                categories[cat].sort((a, b) => a.name.localeCompare(b.name));
            });

            categoryView.innerHTML = Object.keys(categoryEmojis).map(category => `
                <div class="category-section">
                    <h2 class="category-title">
                        ${categoryEmojis[category]} ${category}
                    </h2>
                    <div class="recipe-list">
                        ${categories[category].map(recipe => `
                            <div class="recipe-item" onclick='showRecipeDetails(${JSON.stringify(recipe)})'>
                                ${recipe.name}
                                <span style="color:var(--muted)">→</span>
                            </div>
                        `).join('') || '<p style="color: var(--muted)">No recipes yet</p>'}
                    </div>
                </div>
            `).join('');

            categoryView.style.display = 'block';
            detailsView.style.display = 'none';
            backBtn.style.visibility = 'hidden';
        }

        document.getElementById('searchRecipes').addEventListener('input', (e) => {
            showCategoryView(e.target.value);
        });

        document.getElementById('backBtn').addEventListener('click', () => {
            showCategoryView();
        });

        if (lastViewedId) {
            const lastRecipe = recipes.find(r => r.id === lastViewedId);
            if (lastRecipe) {
                showRecipeDetails(lastRecipe);
            } else {
                showCategoryView();
            }
        } else {
            showCategoryView();
        }
    </script>
</body>
</html>
