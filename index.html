<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Donna's Recipe Collection</title>
    <style>
        :root {
            --primary: #7c3aed;
            --secondary: #e6d5ff;
            --bg: #fcf7ff;
            --text: #2c1810;
            --muted: #6b7280;
        }

        body {
            margin: 0;
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
        }

        .marquee {
            background: linear-gradient(135deg, var(--primary), #9f7aea);
            color: white;
            white-space: nowrap;
            overflow: hidden;
            padding: 0.8rem;
        }

        .marquee-content {
            display: inline-block;
            animation: marquee 30s linear infinite;
            font-size: 1.1rem;
        }

        @keyframes marquee {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        header {
            background: linear-gradient(135deg, var(--primary), #9f7aea);
            color: white;
            padding: 1rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .back-btn {
            background: rgba(255,255,255,0.2);
            border: none;
            padding: 0.5rem 1rem;
            color: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 1rem;
        }

        .search-bar {
            width: 100%;
            max-width: 500px;
            margin: 1rem auto;
            position: relative;
        }

        .search-bar input {
            width: 100%;
            padding: 0.8rem 1rem 0.8rem 2.5rem;
            border: 1px solid var(--secondary);
            border-radius: 12px;
            font-size: 1rem;
        }

        .search-bar::before {
            content: "ğŸ”";
            position: absolute;
            left: 0.8rem;
            top: 50%;
            transform: translateY(-50%);
        }

        .category-section {
            margin: 2rem 0;
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .category-title {
            color: var(--primary);
            font-size: 1.3rem;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid var(--secondary);
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .recipe-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .recipe-item {
            padding: 0.8rem;
            border-radius: 8px;
            margin-bottom: 0.5rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background-color 0.2s;
        }

        .recipe-item:hover {
            background: var(--secondary);
        }

        .recipe-details {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            margin-top: 1rem;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
        }

        .recipe-details h2 {
            color: var(--primary);
            margin-top: 0;
        }

        .ingredients-list, .instructions-list {
            padding-left: 1.2rem;
        }

        .bee {
            position: fixed;
            font-size: 1.5rem;
            opacity: 0.2;
            animation: float 3s ease-in-out infinite;
            pointer-events: none;
            z-index: 1;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
        }

        .serving-info {
            background: var(--secondary);
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            font-size: 0.9rem;
        }

        .uma-rating {
            margin-top: 1.5rem;
            background: #fff7e6;
            border: 2px dashed #fbbf24;
            padding: 1rem;
            border-radius: 12px;
            font-size: 1.2rem;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="marquee">
        <div class="marquee-content">
            ğŸ Donna's Retirement Recipe Collection ğŸ A Lifetime of Delicious Recipes ğŸ¯
        </div>
    </div>

    <header>
        <button id="backBtn" class="back-btn">â† Back</button>
        <h1>Donna's Recipe Collection</h1>
        <div style="width:80px"></div>
    </header>

    <div class="container">
        <div class="search-bar">
            <input type="search" id="searchRecipes" placeholder="Search recipes...">
        </div>

        <div id="categoryView"></div>
        <div id="recipeDetails" style="display:none"></div>
    </div>

    <div class="bee" style="top: 20%; left: 10%">ğŸ</div>
    <div class="bee" style="top: 40%; right: 15%">ğŸ</div>
    <div class="bee" style="bottom: 30%; left: 20%">ğŸ</div>

    <script>
        const categoryEmojis = {
            'Cakes': 'ğŸ‚',
            'Cookies': 'ğŸª',
            'Buns': 'ğŸ¥',
            'Christmas': 'ğŸ„',
            'Puddings': 'ğŸ®',
            'Jams': 'ğŸ¯',
            'Pickles': 'ğŸ¥’',
            'Savory': 'ğŸ²'
        };

        const recipes = [
            {
                id: 'cake1',
                name: 'Chocolate Brownies',
                category: 'Cakes',
                servingInfo: 'Makes: 15\nPrep Time: 30 mins\nCook Time: 25-30 mins\nCost: 30p per serve',
                ingredients: '225g Chocolate\n140g Butter\n3 Large eggs\n225g Caster Sugar\n100g Plain Flour\n1tsp Baking Powder\n1tsp Cocoa Powder',
                instructions: '1. Preheat the oven to gas 4, 180Â°C, fan 160Â°C...\n2. Follow the rest of the recipe as listed.'
            },
            {
                id: 'cake2',
                name: 'Banana Bread',
                category: 'Cakes',
                ingredients: '200g self raising flour\n16g cornflour\n1 tsp baking soda\n3/4 tsp baking powder\n3/4 tsp cinnamon\n3 bananas\n56g spread\n52g oil\n1 tsp vanilla\n1 egg',
                instructions: '1. Melt the spread and mix all the wet ingredients together\n2. Mix all dry ingredients together\n3. Add the ingredients together until combined\n4. Grease or line a loaf tin\n5. Pour mixture into loaf tin and bake at 160Â°C for approximately 45 minutes',
                umaRating: true
            },
            {
                id: 'buns1',
                name: 'Tangy Citrus Sticky Chelsea Buns',
                category: 'Buns',
                ingredients: '450ml whole milk\n60g unsalted butter\n650g strong white bread flour\n100g wholemeal flour\n15g salt\n1Â½ tsp fast-action dried yeast\n2 large eggs\nZest + juice of 1 lemon\n125g icing sugar\n40g melted butter\n1 beaten egg + milk for wash\nFor filling: peel from 1 sweet-cured lemon (optional)\n100g mixed peel\n100g dried fruit\n50g dried apricots\n50g dates\n120g soft brown sugar\n1 tsp mixed spice\n1 tsp cinnamon\nFor glaze: juice of 2 lemons, 50ml lemonade, 125g sugar, 70g sweet-cured lemon pulp (optional)',
                instructions: '1. Warm milk + butter until melted\n2. Mix flours, salt, and yeast separately\n3. Add eggs to warm milk, then combine with flour to form dough\n4. Knead until smooth, cover and rise 1-2 hrs\n5. Mix filling fruits + spices\n6. Roll dough to rectangle, brush with butter, spread sugar + fruit\n7. Roll tightly, slice into 12 pieces, prove 45-60 mins\n8. Brush with egg wash, bake 30 mins at 200Â°C/fan 180Â°C/gas 6\n9. Boil glaze ingredients 5 mins to form syrup\n10. Brush buns with glaze and drizzle icing when cool'
            },
            {
                id: 'savory1',
                name: 'Katsu Curry Sauce',
                category: 'Savory',
                ingredients: '2-3 tbsp vegetable oil\n1 onion, finely chopped\n1 garlic clove\n2.5cm ginger\n1 tsp turmeric\n2 tbsp curry powder\n1 tbsp flour\n300ml stock\n100ml coconut milk\n1 tsp soy sauce\n1 tsp sugar',
                instructions: '1. Heat oil, cook onion\n2. Add garlic + ginger\n3. Add spices and flour\n4. Add stock + coconut milk\n5. Add soy + sugar, simmer until thickened'
            }
        ];

        let lastViewedId = localStorage.getItem('lastViewedRecipe');

        function showRecipeDetails(recipe) {
            const categoryView = document.getElementById('categoryView');
            const detailsView = document.getElementById('recipeDetails');
            const backBtn = document.getElementById('backBtn');
            
            detailsView.innerHTML = `
                <div class="recipe-details">
                    <h2>${categoryEmojis[recipe.category]} ${recipe.name}</h2>
                    ${recipe.servingInfo ? `
                        <div class="serving-info">
                            ${recipe.servingInfo.split('\n').join('<br>')}
                        </div>
                    ` : ''}
                    <h3>Ingredients:</h3>
                    <ul class="ingredients-list">
                        ${recipe.ingredients.split('\n').map(i => `<li>${i}</li>`).join('')}
                    </ul>
                    <h3>Instructions:</h3>
                    <ol class="instructions-list">
                        ${recipe.instructions.split('\n').map(i => `<li>${i.replace(/^\d+\.\s*/, '')}</li>`).join('')}
                    </ol>
                    ${recipe.umaRating ? `
                        <div class="uma-rating">
                            <strong>Uma Rating:</strong><br> ğŸ‘¶ğŸ‘¶ğŸ‘¶ğŸ‘¶ğŸ‘¶
                        </div>
                    ` : ''}
                </div>
            `;
            
            categoryView.style.display = 'none';
            detailsView.style.display = 'block';
            backBtn.style.visibility = 'visible';
            
            localStorage.setItem('lastViewedRecipe', recipe.id);
        }

        function showCategoryView(searchTerm = '') {
            const categoryView = document.getElementById('categoryView');
            const detailsView = document.getElementById('recipeDetails');
            const backBtn = document.getElementById('backBtn');
            
            const categories = {};
            Object.keys(categoryEmojis).forEach(cat => categories[cat] = []);
            
            recipes.forEach(recipe => {
                if (!recipe.name.toLowerCase().includes(searchTerm.toLowerCase())) return;
                categories[recipe.category].push(recipe);
            });

            Object.keys(categories).forEach(cat => {
                categories[cat].sort((a, b) => a.name.localeCompare(b.name));
            });

            categoryView.innerHTML = Object.keys(categoryEmojis).map(category => `
                <div class="category-section">
                    <h2 class="category-title">
                        ${categoryEmojis[category]} ${category}
                    </h2>
                    <div class="recipe-list">
                        ${categories[category].map(recipe => `
                            <div class="recipe-item" onclick='showRecipeDetails(${JSON.stringify(recipe)})'>
                                ${recipe.name}
                                <span style="color:var(--muted)">â†’</span>
                            </div>
                        `).join('') || '<p style="color: var(--muted)">No recipes yet</p>'}
                    </div>
                </div>
            `).join('');

            categoryView.style.display = 'block';
            detailsView.style.display = 'none';
            backBtn.style.visibility = 'hidden';
        }

        document.getElementById('searchRecipes').addEventListener('input', (e) => {
            showCategoryView(e.target.value);
        });

        document.getElementById('backBtn').addEventListener('click', () => {
            showCategoryView();
        });

        if (lastViewedId) {
            const lastRecipe = recipes.find(r => r.id === lastViewedId);
            if (lastRecipe) {
                showRecipeDetails(lastRecipe);
            } else {
                showCategoryView();
            }
        } else {
            showCategoryView();
        }
    </script>
</body>
</html>
